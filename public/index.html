<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Socket.IO Chat</title>
    <style>
      :root {
        --bg: #0f172a;
        --panel: #111827;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --accent: #60a5fa;
        --accent-2: #34d399;
        --danger: #f87171;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0; padding: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans JP, sans-serif;
        background: linear-gradient(180deg, #0b1020, #0f172a);
        color: var(--text);
        height: 100vh; display: flex; align-items: center; justify-content: center;
      }
      .container {
        width: 100%; max-width: 900px; height: 90vh;
        display: grid; grid-template-rows: auto 1fr auto; gap: 12px;
        padding: 16px; border-radius: 16px; background: rgba(17, 24, 39, 0.75);
        backdrop-filter: blur(8px); box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      }
      header { display: flex; align-items: center; justify-content: space-between; }
      header h1 { margin: 0; font-size: 18px; color: var(--text); letter-spacing: 0.02em; }
      .presence { font-size: 12px; color: var(--muted); }
      .namebar { display: flex; gap: 8px; }
      .namebar input {
        background: #0b1220; color: var(--text);
        border: 1px solid #1f2937; padding: 8px 10px; border-radius: 8px; width: 200px;
      }
      .namebar button {
        background: var(--accent-2); border: none; color: #06221a; font-weight: 700;
        padding: 8px 12px; border-radius: 8px; cursor: pointer;
      }
      #messages {
        list-style: none; margin: 0; padding: 0; overflow-y: auto;
        border: 1px solid #1f2937; border-radius: 12px; background: #0b1220;
      }
      #messages li { padding: 10px 12px; border-bottom: 1px solid #111827; }
      #messages li:last-child { border-bottom: none; }
      #messages .sys { color: var(--muted); font-size: 12px; text-align: center; }
      #messages .msg .meta { color: var(--muted); font-size: 12px; margin-bottom: 2px; }
      #messages .msg .body { white-space: pre-wrap; word-break: break-word; }
      form {
        display: grid; grid-template-columns: 1fr auto; gap: 10px;
      }
      input#m {
        background: #0b1220; color: var(--text);
        border: 1px solid #1f2937; padding: 12px 14px; border-radius: 10px;
      }
      button#send {
        background: var(--accent); color: #0a1424; font-weight: 800;
        border: none; padding: 12px 16px; border-radius: 10px; cursor: pointer;
      }
      footer { font-size: 12px; color: var(--muted); text-align: right; }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Realtime Chat</h1>
        <div class="namebar">
          <input type="text" id="name" placeholder="表示名" />
          <button id="saveName">参加/更新</button>
        </div>
      </header>
      <div class="presence">オンライン: <span id="online">-</span> 人</div>
      <ul id="messages" aria-live="polite" aria-relevant="additions"></ul>
      <form id="form" autocomplete="off">
        <input id="m" placeholder="メッセージを入力… (Shift+Enterで改行)" />
        <button id="send" type="submit">送信</button>
      </form>
      <footer>Powered by Express + Socket.IO</footer>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/client.js" defer></script>
  </body>
  </html>


